# weather_forecast
Web-приложение для получения прогноза погоды в городе, который ввел пользователь. 
Для того чтобы воспользоваться приложением, пользователю необходимо зарегистрироваться и авторизоваться.

<!-- ABOUT THE PROJECT -->
## О проекте

- Для получения погоды использовался API https://open-meteo.com/.
- Приложение выполнено на фреймворках Django и Django Rest Framework.
- В проекте представлены приложения *users*, *weather*, реализованы модели User, Weather.
- Для работы контроллеров описаны сериализаторы.
- В проекте используется JWT-авторизация, каждый эндпоинт закрыт авторизацией.
- Настроена фильтрация (Django-filter) для эндпоинта вывода списка погоды с возможностью фильтровать по локации.
- Реализована пагинация.
- При повторном посещении сайта пользователю предлагается посмотреть погоду в городе, в котором пользователь смотрел погоду ранее.
- Сохраняется история поиска для каждого пользователя, а также реализован эндпоинт, показывающее сколько раз вводили тот или иной город.
- Написаны тесты (Unittest) для проверки всех имеющихся эндпоинтов в проекте (покрытие 87%).
- Документация приложения реализована с помощью библиотеки drf-yasg.
- PostgreSQL используется для хранения данных.


<!-- GETTING STARTED -->
## Подготовка к работе

Чтобы запустить локальную копию, выполните следующие простые шаги:

### Установка

1. Клонируйте проект
   ```sh
   https://github.com/aukhadieva/weather_forecast
   ```
2. Убедитесь, что вы получили из удаленного репозитория все ветки и переключились на ветку разработки develop
   ```sh
   git checkout develop
   ```
3. Установите зависимости проекта (в случае, если не установились при клонировании)
   ```sh
   poetry install
   ```
4. Создайте в корне проекта файл .env и заполните переменные среды в соответствии с желаемой конфигурацией, используя файл .env_sample
5. Примените миграции
   ```sh
   python manage.py migrate
   ```

### Запуск приложения
Для того чтобы запустить проект, выполните команду
   ```sh
   python3 manage.py runserver
   ```

### Документация
Для того чтобы ознакомиться с документацией по проекту, пройдите по ссылке
1. Redoc
   ```sh
   http://localhost:8000/redoc/
   ```
или

2. Swagger
   ```sh
   http://localhost:8000/swagger/
   ```
   
### Тестирование
Для запуска тестов, находясь в виртуальном окружении проекта, выполните команды
```sh
   coverage run --source='.' manage.py test
   ```
и
```sh
   coverage report
   ```
Для генерации HTML-отчета в целях оценки покрытия тестами выполните команду
```sh
   coverage html
   ```

Из папки htmlcov запустите файл index.html, в открывшемся окне выберите модуль, покрытие которого хотите проверить